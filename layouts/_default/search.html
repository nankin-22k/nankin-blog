{{- define "main" -}}

<header class="page-header">
    <h1>{{- .Title -}}</h1>
</header>

<div id="searchbox">
    <input id="searchInput" autofocus placeholder="{{ .Params.placeholder | default .Title }}"
        aria-label="search" type="search" autocomplete="off" maxlength="64">
    <ul id="searchResults" aria-label="search results"></ul>
</div>

{{- /* PaperMod標準の検索用スクリプト（これを消すと動かなくなります） */ -}}
{{- $common := resources.Get "js/fastsearch.js" | minify | fingerprint -}}
<script defer src="{{ $common.RelPermalink }}"></script>

{{- /* 隠しワープ機能 */ -}}
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const secretCommands = {
            "Tulpamancy Log": "/nankin-blog/restricted-area/",
            "タルパ": "/nankin-blog/restricted-area/"
        };

        const input = document.getElementById("searchInput");
        if (input) {
            input.addEventListener("input", (e) => {
                const query = e.target.value.trim();
                if (secretCommands[query]) {
                    window.location.href = secretCommands[query];
                }
            });
        }
    });
</script>

{{- end -}}